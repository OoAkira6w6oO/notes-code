# 基本的组成部分和特征

## 总线

### 理解

- 贯穿整个系统的一组电子管道
- 携带信息字节、在各个部件之间传递

### 特征

- 总线一般被设计成传送固定长度的字节块，称为字（word），word中的字节数（字长）是一个基本的系统参数
- 大多数机器中的机器字长是4个字节（32位）或者8个字节（64位）

## I/O设备

### 特征

- 每个I/O设备都通过一个控制器或者适配器与I/O总线相连
- 控制器和适配器之间的区别主要在于他们的封装方式。
  - 控制器是I/O设备本身或者系统的主印刷电路板（主板）上的芯片组
  - 适配器是一块插在主板插槽上的卡

## 主存

### 理解

- 在物理层面，由一组“动态随机存取存储器DRAM”芯片组成
- 在逻辑层面，是一个线性的字节数组，每个字节都有唯一的地址（数组索引）。地址从0开始

### 特征

- 临时存储设备，在处理器执行程序时，用来存放程序和程序处理的数据。

## 处理器

### 理解

- 中央处理单元CPU = 处理器
- 解释或执行储存在主存中指令的引擎

### 特征

- 处理器的核心是一个大小为一个字（word）的存储设备（寄存器），称为程序计数器（PC）

- 在任何时候，PC都指向主存中的某条机器语言指令（即含有该条指令的地址）

- CPU中的核心部分

  - 寄存器文件（register file）是一个小的存储设备，由一些单个字长的寄存器组成。

  - ALU（算数/逻辑单元）计算新的数据和地址值

- CPU可能会执行的操作

  - 加载：从主存中复制一个byte或word到寄存器，覆盖寄存器原来的内容
  - 存储：从寄存器复制一个byte或word到主存
  - 操作：把两个寄存器的内容复制到ALU，ALU对这两个字做算术运算，并将结果存放到一个寄存器
  - 跳转：从指令本身中抽取一个word，并将起复制给PC

- 指令集架构 & 微体系结构

  - CPU的指令执行模型就是由“指令集架构”决定的
  - “指令集架构”描述的是每条机器代码指令的效果；“微体系结构”描述的是处理器实际是如何实现的

### 寄存器

- 寄存器：大小为一个字的存储设备
- 寄存器文件：小的存储设备，由一些单个字长的寄存器组成

# 程序执行时硬件的动作

1. 首先是主存知道了要干什么【主存：“执行文件名”】
   1. shell等待输入命令
   2. 输入命令
   3. shell将字符逐一读入寄存器（从外部I/O设备到寄存器的路径：数据 => USB控制器     => I/O总线 => I/O桥 => 总线接口 =>）
   4. shell将寄存器中的字符存放到内存中（从寄存器到内存的路径：数据 =>     总线接口 => 系统总线 => I/O桥 => 内存总线      =>）
   5. 在键盘中敲入回车键     <=> shell知道我们结束了命令的输入
2. 主存需要加载要指定的部分（shell执行一系列指令来加载可执行程序）
   1. 这一系列指令将程序中的代码和数据复制到主存，数据包括最终输出的结果（路径：disk => I/O总线 => I/O桥 => 内存总线 => 主存）
   2. 还有一种途径，利用直接存储器存取（DMA）技术，数据可以不通过处理器而直接到达主存
3. 执行程序
   1. 程序相关内容会被从主存复制到寄存器中：主存 => 内存总线 => I/O桥 => 系统总线 => 总线接口     => 寄存器
   2. 寄存器文件中的内容被复制到显示设备，然后输出：寄存器 =>     总线接口 => 系统总线 => I/O桥 => I/O总线 => 图形适配器
