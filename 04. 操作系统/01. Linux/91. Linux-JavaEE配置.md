# Linux上部署JavaEE

## 原理

1. 需要配置的内容
   -  jdk
   -  apache-tomcat
   -  eclipse
   - mysql

2. 配置核心思路——将需要的内容通过Xftp上传到/opt
   - FTP（File Transfer Protocol）


## 实操

### jdk的安装

1. 设置配置文件 path
   ```shell
   vim /etc/profile
   JAVA_HOME=/opt/jdkxxxxx
   PATH=/opt/jdkxxxx/bin:$PATH   >>>> 这里冒号的作用类似windows中的分号的作用，将当前PATH和之前的PATH连接到一起
   export JAVA_HOME PATH
   ```

2. 需要注销用户，环境变量才能生效

3. 测试是否安装成功

### tomcat安装

1. 启动tomcat
   ```shell
   cd tomcat/bin
   ./startup.sh
   # 访问localhost:8080测试
   ```

2. 开放Linux的8080端口，让外网可以访问
   ```shell
   vim /etc/sysconfig/iptables
   # 复制一份22端口的，改成8080端口——22端口是SSH服务的
   ```

3. 在宿主机中测试
   通过 Linux的IP地址：端口号 验证是否成功配置

### Eclipse安装

1. 执行./eclipse
2. 编写test程序

### mysql安装

1. 检查是否安装有MySQL Server
   ```shell
   rpm -qa | grep mysql# 删除已有的
   rpm -e mysql-libs / rpm -e --nodeps mysql-libs
   ```

2. 安装编译需要的package

   ```shell
   yum -y install make gcc-c++ make bison-devel ncurses-devel
   ```

3. 下载并解压
   ```shell
   tar -zxvf mysql-5.6.14.tar.gz
   ```

4. 进入mysql目录然后编译安装 —— 使用make
   ```shell
   cd mysql-5.6.14
   # 编译 MySQL 源码前，使用 CMake 指定安装路径、数据目录、存储引擎、端口、字符集等参数
   cmake -DCMAKE_INSTALL_PREFIX=/usr/local/mysql
   -DMYSQL_DATADIR=/usr/local/mysql/data -DSYSCONFDIR=/etc
   -DWITH_MYISAM_STORAGE_ENGINE=1
   -DWITH_INNOBASE_STORAGE_ENGINE=1
   -DWITH_MEMORY_STORAGE_ENGINE=1
   -DWITH_READLINE=1
   -DMYSQL_UNIX_ADDR=/var/lib/mysql/mysql.sock
   -DMYSQL_TCP_PORT=3306
   -DENABLED_LOCAL_INFILE=1
   -DWITH_PARTITION_STORAGE_ENGINE=1
   -DEXTRA_CHARSETS=all
   -DDEFAULT_CHARSETS=utf8
   -DDEFAULT_COLLATION=utf8_general_ci
   # 编译
   make
   # 安装
   make install
   ```

5. 配置mysql的用户管理组
   ```shell
   # 确认 当前配置
   cat /etc/passwd 
   cat /etc/group
   # 创建 group ，添加user
   groupadd mysql
   useradd -g mysql mysql
   # 修改权限
   chown -R mysql:mysql /user/local/mysql
   ```

6. 初始化设置，进入安装路径，执行初始化配置脚本，创建自带的数据库和表

   ```shell
   cd usr/local/mysql
   scripts/mysql_install_db --basedire=usr/local/mysql --datedir=/usr/local/mysql/data --ser=mysql # 初始化安装脚本、指定安装目录、数据存储目录、系统用户
   ```

7. 启动MySQL

   ```shell
   # 查看当前自启动，设置mysql开机启动
   cp support-files/mysql.server /etc/init.d/mysql
   chkconfig mysql on
   service mysql start
   # 查看一眼端口的启动情况
   netstat -anp # 保证3306端口已启动
   # 执行下面的命令修改root密码
   cd /usr/local/mysql/bin
   ./mysql -u root -p
   mysql > SET PASSWORD = PASSWORD('密码xxx');
   qiut
   show databases
   create database test
   user test;
   creat table user;
   insert into user values(,);
   ```

8. 配置MySQL的路径
   ```shell
   vim /etc/profile
   PATH + usr/local/mysql/bin
   source /etc/profile
   ```

   

   
