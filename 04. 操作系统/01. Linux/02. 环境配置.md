# 基本思路

- 配置虚拟机本身
- 实现虚拟机联网
- 实现虚拟机文件传输

# VMWare

## 基本说明

- 虚拟机，用来安装Linux
- 通过VMWare创建虚拟机空间 => 在虚拟机空间安装Linux系统文件

## bios配置

- 处理器个数

- CD/DVD

  - 指向CentOS.iso

- 分区

  | 分区  | 推荐大小 | 功能                                                         |
  | ----- | -------- | ------------------------------------------------------------ |
  | boot  | 200M     | 挂载点，Linux启动时需要的引导文件                            |
  | swap  | 2048M    | - 交换分区，系统内存不够时可以用swap暂时替代内存<br/>- 分区太大会导致性能下降<br/>- memory的1.5～2倍 |
  | root  |          |                                                              |
  | kdump |          | 内核崩溃转存储机制，会占用一部分内存                         |

## 添加硬盘

1. VMWare——虚拟机添加硬盘
   虚拟机——设置——硬盘——添加——SCSI / 2G / 将虚拟磁盘拆分成多个文件
   重启后确认分区增加

   ```shell
   lsblk -f # 查看Linux分区和挂载情况
   ```

2. 进入Linux——分区

   ```shell
   # sdb下分出sdb1
   fdisk /dev/sdb——m——n——p——1——1——w
   # 格式化 （sdb1识别出唯一id）
   mkfs -t ext4 /dev/sdb1
   ```

3. 进入Linux——挂载

   ```shell
   # 创建挂载目录
   mount /dev/sdb1 /home/newdisk
   unmount /home/newdisk
   # 设置可以自动挂载（重启后，保证仍然可以成功挂载）
   vim /etc/fstab (记录了文件分区和挂载点)
   ```


## 网络配置

### 为什么要进行网络配置

- 在Linux安装的时候进行的网络配置，IP一般是动态变化的，重启一下可能就变了，无法满足平时的开发需求。

### 三种网络模式

#### 前提

- A：VMWare会自动给物理机创建虚拟网卡，这个网卡的信息既可以在物理机看到
- B：VMWare会给虚拟机创建虚拟网卡（e1000/VMXNET）
- 配置的时候就是根据A的信息在配置B

#### 仅主机模式

- Host-Only / Internal 模式

- VMnet1

- 只和物理机进行通信，虚拟机无法连接外网

#### 桥连接模式

- Bridge模式

- VMnet0

- 借助物理机直接从路由器那儿分配了一个新的IP地址，和物理机在同一网段
- VMWare DHCP Service在物理机上运行，来保证桥连接模式的执行
- 可以配置网关

#### NAT模式

- **Network Address Translation**，即 **网络地址转换**

- VMnet8
- 将物理机作为路由器，创建了一个内部的局域网；
  虚拟机的网段和物理机一般不在一个网段；
  每一次发送请求，都发生了地址转换，在外界看来，其实是物理机的IP地址在不断发生请求
- VM 能访问外网，但外网不能主动访问 VM。安全性高，常用
- 起初阶段会自动通过dhcp服务连接，但是dhcp存在租期，作为服务器的电脑因此需要手动改为static模式

#### 实操

- 单网卡配置

  - vi /etc/sysconfig/network-scripts/ifcfg-ethx 【虚拟网卡的配置文件】

  ```config
  IPADDR=192.168.184.130 // eg. 指定固定ip
  GATEWAY //虚拟化软件提供的 NAT 网关地址（比如 VMware 常见是 192.168.56.1，VirtualBox 默认是 10.0.2.2）
  DNS1 //DNS和GATEWAY保持一致即可，也可以用公共 DNS（8.8.8.8, 114.114.114.114 等）
  BOOTPROTO=static //以静态的方式获取ip
  ONBOOT=yes
  重启网络服务/重启机器
  ```


### 配置要点总结

- 实践中，如何验证CentOS配置完毕
  - 在CentOS中顺利打开终端
  - 可以ping到外面
- VMTools
  - 设置CentOS和电脑之间的共享文件夹
  - 保证CentOS可以共享电脑的剪切板
  - 共享位置：CentOS/mnt/hgfs【Host-Guest File System

## 磁盘情况确认

| 命令                               | 功能                                          |
| ---------------------------------- | --------------------------------------------- |
| df -lh                             | 查询系统整体磁盘使用情况                      |
| du -h                              | 查询指定目录的磁盘占用情况                    |
| du -ach --max-depth=1 /opt         | 查询/opt目录的磁盘占用情况，深度为1           |
| du -s                              | 指定目录占用大小汇总                          |
| du -h                              | 带计量单位                                    |
| du -a                              | 含文件                                        |
| du -max-depth=1                    | 子目录深度                                    |
| du -c                              | 列出明细的同时，增加汇总值                    |
| ls -l /home \| grep "^-" \| wc -l  | 统计/home文件夹下文件的个数                   |
| ls -l /home \| grep "^d" \| wc -l  | 统计/home文件夹下目录的个数                   |
| ls -lR /home \| grep "^-" \| wc -l | 统计/home文件夹下文件的个数，包括子文件夹下的 |
| ls -lR /home \| grep "^d" \| wc -l | 统计/home文件夹下目录的个数，包括子目录的     |
| yum install tree 👉 tree            | 以树状显示目录结构                            |



# XShell5 / Xftp5

- FTP（File Transfer Protocol）
- SFTP（SSH File Transfer Protocol）

- 功能——远程登录Linux用的 / 远程服务器传输文件用的
- 实操——Linux需要开启sshd服务
  - 监听外部命令
  - 保证安全性一般只开放22port
- ssh和sshd
  - ssh = Secure Shell，用来在不安全的网络上安全地进行远程登录、远程执行命令、传输文件等
  - sshd = SSH Deamon， SSH 协议的服务器端实现，它常驻在服务器上，监听端口（默认 22），等待客户端发起 SSH 连接
