# 编码 & 解码 的概念

## 字符处理

- 编码
  - 字符串 => 字节（看得懂 => 看不懂）
  - 字符 => 二进制
- 解码：
  - 编码的逆过程，字节 =>     字符串
  - 二进制 => 字符

## 存储处理

- 保存文件时（编码）
  - 内存 => disk
- 打开文件时
  - 解码过程
- 要保证编码和解码使用的是同一个编码集，否则会出现乱码

# 字符集

- 编码和解码时所采用的**规则**，成为字符集

- 常见编码表

  后面的编码表都是兼容ASCII的

  | ASCII     | 美国标准信息交换码 | 7位 / 128个                       |
  | --------- | ------------------ | --------------------------------- |
  | ISO8859-1 | 拉丁码表，欧洲码表 | 8位 / 256个                       |
  | GB2312    | 中国的中文编码     | 2Byte                             |
  | GBK       | 升级版中国字符     | 2Byte                             |
  | Unicode   | 国际标准码，万国码 | 2Byte                             |
  | UTF-8     | Unicode不够用了    | 变长 1-5Byte，最新修正的用了6Byte |
  | UTF-16    | 不兼容ASCII        | 变长 2-4Byte                      |
  | UTF-32    | 不兼容ASCII        | 定长 4Byte                        |

### ASCII码

- 128个符号
- a=97，A=65

### UTF-8

- 无字节序要求；

- 节约内存的向后兼容ASCII；

  - ASCII（标准英文字符）在 UTF-8 里仍然只占 1 个字节

- 单字节上错误兼容更好；

  - 每个字节的最高几位能告诉你这是一个独立字符，还是某个字符的开头/中间/结尾。

  - 所以即使数据中间坏了一点，解码器还能尽量跳过坏掉的部分，继续解析后面的内容。

  - 而 UTF-16/UTF-32 一旦对齐出错，后面基本全废。

- 理论涵盖的编码多向前兼容更大扩展；

  - UTF-16：本来想固定长度，但遇到大字符要用 **代理对**，结果变成“有时 2 字节，有时 4 字节”。就要有一个标记位。

    UTF-8：一开始就设计成变长（1~4 字节），所以不存在“代理对”这种额外规则。

- 与编程语言兼容处理上变得相对简单；

  - 大多数编程语言和操作系统底层处理的基本单位就是“字节 (byte)”



### ANSI

- 中文OS下就是GBK汉字码
- windows命令行中默认使用GBK的方式进行解析

- GBK：一个汉子占用2个字节     //China

- UTF-8: 一个汉字占用3个字节     //World

## Base 64 —— ASCII的子集

### 使用场景

- 邮件中的附件，根据SMTP协议中——按Base 64保存
-  HTML网页中的DataURL内联校图片，节省HTTP请求，让网页更快显示
- Github REST API，在Json中嵌入文件原始内容
- 编译代码时的Sourcemap，让浏览器可以看到编译前的源码，方便debug

### 作用

- 二进制<=>ASCII纯文本字符
- 在任何兼容ASCII的地方完好无损地传输文件

### 原理

- 从ASCII中挑选了64个字母，编写出了一个子集
  - A～Z 
  - a～z 
  - 0～9 
  - +
  - /
  - 这些字符在子集中的编码正好是他们对应的index索引值
- 3 Byte数据 => 24 位 二进制 => 4set x 6位 => 每一个6位都在子集中能找到一个可显示字符

- 任意 3Byte 在传输时，实际是4Byte => Base 64编码会带来 1/3 的额外开销
- 如果input不是6的倍数，结尾一般补0，最后一位补=

# 进制

- 计算中不同的进制和运算特点
  - 二进制：binary 0b/0B
  - 八进制：octal 0
  - 十进制：decimal
  - 十六进制：hex 0x/0X
    - 0x21AF+1=0x22B0
- 输出不做任何处理的话，默认输出的都是十进制
- 进制之间的相互转换
  - 二进制 to 十进制 —— 权重
  - 十进制 to 二进制 —— 除以2取余数的逆
  - 二进制 to 八进制 —— 3位一组
  - 二进制 to 十六进制 —— 4位一组
- 计算机中的减法 和 乘法 都会被识别成加法

# 源码、反码、补码

- 首位是符号位
  - 0 正数
  - 1 负数
- 正数 三码 合一
- 负数 三码
  - 反码：除符号位外，原码各位取反
  - 补码：符号位不变，反码+1
- 计算机底层都是用【补码】的方式存储数据的
- int = 127+1 = -128

