# 数组定义

- 数组是相同类型的数据的集合
- 同一个数组的每个元素有相同的变量名，不同的序号下标
- 维度
  - C语言中允许任意维数的数组
  - 一位数组：只有一个下标
  - 二维数组：有两个下标


- 长度
  - 正的整数常量表达式
  - C语言不允许定义动态数组

- 不允许一次引用整个数组，**只能逐个引用**每个数组元素

# 数组特点

- 数组的名字本身就代表该数组的起始地址，不需要额外的取地址运算符

# 一维数组

- 定义

```C
//1. 长度/元素 全指定
int a[5]={1, 2, 3, 4, 5};

//2. 指定所有元素，自动决定长度
int data[]={1, 2, 4, 4};//长度是4

//3. 指定长度，仅指定部分元素
int data[5]={5, 4, 3};//其他默认是0

//4. 指定长度，初始值不确定——通常是栈上残留数据，C语言是手动垃圾回收的，所以可能得到垃圾值
int a[5];

//5. 指定长度，初始值确定——使用static关键字
static int a[5];//自动都默认0
```

# 二维数组

- 占据连续的存储空间
- 内存中排满第一行的元素，再排第二行
- 除第一维可以不指定长度外，其余各维都必须指定长度
  - 编译器需要知道每行占多少元素
  - 编译器在访问多维数组元素时需要知道每行的大小才能正确计算偏移地址

```C
//1. 指定行列
int x[3][2];

//2. 指定行列，所有元素
int X[3][2]={{1,2},{3,4},{5,6}};

//3. 指定行列，部分元素或全部不指定
static int X[3][2]={{1},{2},{3}};//因为有static，其余默认0
static int d[5][5];//有static，自动都默认0

//4. 指定列、所有元素，自动确定行
int X[ ][2]={{1},{2,3},{4}};//会自动确定行数
```

- 从键盘中接收输入

```C
//按行输入
for(i=0;i<3;i++)
      for(j=0;j<2;j++)
           scanf("%d",&X[i][j]);
//按列输入
for(i=0;i<2;i++)
    for(j=0;j<3;j++)
        scanf("%d",&X[j][i]);
```

# 字符数组

## 单纯字符数组

```C
//1. 一维
char c[10];

//2. 二维
char c[3][3];

//3. 定义所有元素
char ch[5]={'H','e','l','l','o'};

//4. 指定部分元素，默认是空字符串
static char ch[1][1] = { 'Y' };//ch[0][0] = 'Y',未赋值元素自动赋值'\0'，空字符
```

## 字符串

```C
//1. 字符串形式指定所有元素
static char str[ ]={"Happy"};

//2. 依次指定所有元素，如果没有\0，只是单纯的字符数组不是字符串
static char str[ ]={'H','a','p','p','y','\0'};
    //字符串会被自动补一个'\0'作为结束,如果没有 '\0'，它会一直读到内存中随机的值,导致程序崩溃

//3. scanf ... “%s”来输入的字符串是以“空格”、TAB或“回车”来结束输入的
char str[10];
scanf("%s",str);
printf("%s",str);//输出的时候不会带'\0'
```

## 常用函数

```C
#include <stdio.h>
#include <string.h>
#include <ctype.h> // 用于转换大小写

// 自己实现 strlwr 和 strupr，因为有些编译器没有提供
void strlwr_custom(char *s) {
    for(int i = 0; s[i]; i++)
        s[i] = tolower(s[i]);
}

void strupr_custom(char *s) {
    for(int i = 0; s[i]; i++)
        s[i] = toupper(s[i]);
}

int main() {
    char p[20];
    char str1[50], str2[50];

    // ----------------------------
    // gets() 读取一行输入，直到回车结束
    // 注意：gets() 已不安全，建议用 fgets()
    printf("请输入一行字符串 (按回车结束): ");
    fgets(p, sizeof(p), stdin);  // 安全替代 gets
    // fgets 会保留换行符，需要去掉
    p[strcspn(p, "\n")] = '\0';

    // ----------------------------
    // puts() 输出字符串，自动换行
    printf("你输入的字符串是：");
    puts(p);

    // ----------------------------
    // strcpy() 字符串拷贝
    strcpy(str1, "Hello");
    strcpy(str2, "World");
    printf("str1 = %s, str2 = %s\n", str1, str2);

    // ----------------------------
    // strcat() 字符串拼接
    strcat(str1, str2);  // str1 = "HelloWorld"
    printf("str1 + str2 = %s\n", str1);

    // ----------------------------
    // strcmp() 字符串比较
    int R = strcmp("apple", "apple"); // 返回 0，因为相等
    printf("strcmp(\"apple\",\"apple\") = %d\n", R);

    R = strcmp("apple", "banana");    // 返回 <0，因为 "apple" < "banana"
    printf("strcmp(\"apple\",\"banana\") = %d\n", R);

    // ----------------------------
    // strlen() 获取字符串长度（不包括 '\0'）
    printf("strlen(str1) = %zu\n", strlen(str1));

    // ----------------------------
    // strlwr() 和 strupr() 自定义实现
    char a1[] = "Hello World!";
    char a2[] = "Hello World!";
    strlwr_custom(a1);
    strupr_custom(a2);
    printf("小写: %s\n", a1);
    printf("大写: %s\n", a2);

    return 0;
}
```

